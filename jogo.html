<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Jogo da Mem√≥ria - MegaStore</title>
<style>
body {
  background: linear-gradient(135deg, #74ABE2, #5563DE);
  color: white;
  font-family: sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
}
h1 { margin-bottom: 10px; }
#tabuleiro {
  display: grid;
  grid-template-columns: repeat(4, 100px);
  grid-gap: 12px;
}
.carta {
  width: 100px;
  height: 100px;
  background: #ffffff22;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
  cursor: pointer;
  transition: background 0.3s;
}
.carta.revelada {
  background: white;
  color: #333;
}
button {
  margin-top: 10px;
  padding: 10px 20px;
  border: none;
  border-radius: 10px;
  background: #fff;
  color: #333;
  cursor: pointer;
  font-weight: bold;
}
#nivel {
  margin-bottom: 15px;
  padding: 5px;
  font-size: 1rem;
}
</style>
</head>
<body>
<h1>üß† Jogo da Mem√≥ria</h1>
<p>Combine os pares e ganhe um cupom!</p>

<label for="nivel">N√≠vel de dificuldade:</label>
<select id="nivel" onchange="reiniciar()">
  <option value="facil">F√°cil</option>
  <option value="medio">M√©dio</option>
  <option value="dificil">Dif√≠cil</option>
</select>

<div id="tabuleiro"></div>
<button onclick="reiniciar()">Reiniciar</button>

<script>
const emojisBase = ["üçé","üçå","üçí","üçâ","üçá","üçã","üçì","ü•ù","ü••","üçë","üçä","üçà"];
let cartas = [];
let reveladas = [];
let paresFeitos = 0;
let inicioTempo = 0;

function embaralhar(arr) {
  return arr.sort(() => 0.5 - Math.random());
}

function definirCartas() {
  const nivel = document.getElementById("nivel").value;
  let quantidade;

  if (nivel === "facil") quantidade = 6;
  else if (nivel === "medio") quantidade = 8;
  else quantidade = 10;

  return [...emojisBase.slice(0, quantidade), ...emojisBase.slice(0, quantidade)];
}

function criarCartas() {
  const tabuleiro = document.getElementById("tabuleiro");
  tabuleiro.innerHTML = "";
  cartas = embaralhar(definirCartas());
  cartas.forEach((emoji) => {
    const carta = document.createElement("div");
    carta.className = "carta";
    carta.dataset.valor = emoji;
    carta.addEventListener("click", () => virarCarta(carta));
    tabuleiro.appendChild(carta);
  });
  inicioTempo = Date.now();
}

function virarCarta(carta) {
  if (reveladas.length < 2 && !carta.classList.contains("revelada")) {
    carta.classList.add("revelada");
    carta.textContent = carta.dataset.valor;
    reveladas.push(carta);
    if (reveladas.length === 2) verificarPares();
  }
}

function verificarPares() {
  const [c1, c2] = reveladas;
  if (c1.dataset.valor === c2.dataset.valor) {
    paresFeitos++;
    reveladas = [];
    if (paresFeitos === cartas.length / 2) {
      const tempo = (Date.now() - inicioTempo) / 1000;
      const nivel = document.getElementById("nivel").value;
      const desconto = calcularDesconto(nivel, tempo);

      setTimeout(() => {
        alert(üéâ Parab√©ns! Voc√™ ganhou um cupom de ${desconto}% de desconto! C√≥digo: MEMORIA${desconto});
        window.location.href = "index.html";
      }, 600);
    }
  } else {
    setTimeout(() => {
      reveladas.forEach(c => {
        c.classList.remove("revelada");
        c.textContent = "";
      });
      reveladas = [];
    }, 800);
  }
}

function calcularDesconto(nivel, tempo) {
  let min, max;
  let rapido = false;

  // Define tempo-limite para considerar "r√°pido"
  if (nivel === "facil") rapido = tempo < 30;
  else if (nivel === "medio") rapido = tempo < 45;
  else if (nivel === "dificil") rapido = tempo < 60;

  if (nivel === "facil") {
    if (rapido) { min = 10; max = 20; } else { min = 5; max = 10; }
  } else if (nivel === "medio") {
    if (rapido) { min = 30; max = 40; } else { min = 20; max = 30; }
  } else if (nivel === "dificil") {
    if (rapido) { min = 40; max = 50; } else { min = 30; max = 40; }
  }

  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function reiniciar() {
  paresFeitos = 0;
  reveladas = [];
  criarCartas();
}

criarCartas();
</script>
</body>
</html>
