<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Jogo da Mem√≥ria - MegaStore</title>
<style>
body {
  background: linear-gradient(135deg, #74ABE2, #5563DE);
  color: white;
  font-family: sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
}
h1 { margin-bottom: 10px; }
#tabuleiro {
  display: grid;
  grid-template-columns: repeat(4, 100px);
  grid-gap: 12px;
  margin-top: 10px;
}
.carta {
  width: 100px;
  height: 100px;
  background: #ffffff22;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
  cursor: pointer;
  transition: background 0.3s;
}
.carta.revelada {
  background: white;
  color: #333;
}
button {
  margin-top: 10px;
  padding: 10px 20px;
  border: none;
  border-radius: 10px;
  background: #fff;
  color: #333;
  cursor: pointer;
  font-weight: bold;
}
#nivel {
  margin-bottom: 15px;
  padding: 5px;
  font-size: 1rem;
}
#telaInicio {
  text-align: center;
}
#telaJogo {
  display: none;
  flex-direction: column;
  align-items: center;
}
#tempo {
  margin-top: 10px;
  font-size: 1.2rem;
  font-weight: bold;
}
</style>
</head>
<body>

<!-- Tela Inicial -->
<div id="telaInicio">
  <h1>üß† Jogo da Mem√≥ria</h1>
  <p>Combine os pares o mais r√°pido poss√≠vel e ganhe cupons de desconto!</p>
  <button onclick="iniciarJogo()">üéÆ Come√ßar a Jogar</button>
</div>

<!-- Tela do Jogo -->
<div id="telaJogo">
  <h1>üß© Encontre os Pares!</h1>
  <label for="nivel">N√≠vel de dificuldade:</label>
  <select id="nivel" onchange="reiniciar()">
    <option value="facil">F√°cil</option>
    <option value="medio">M√©dio</option>
    <option value="dificil">Dif√≠cil</option>
  </select>

  <div id="tempo">‚è±Ô∏è Tempo: 0s</div>
  <div id="tabuleiro"></div>
  <button onclick="reiniciar()">Reiniciar</button>
</div>

<!-- M√∫sica relaxante -->
<audio id="musicaFundo" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/23/audio_bf57c1f0f3.mp3?filename=calm-piano-ambient-110058.mp3" type="audio/mpeg">
  Seu navegador n√£o suporta √°udio.
</audio>

<script>
const emojisBase = ["üçé","üçå","üçí","üçâ","üçá","üçã","üçì","ü•ù","ü••","üçë","üçä","üçà"];
let cartas = [];
let reveladas = [];
let paresFeitos = 0;
let inicioTempo = 0;
let intervaloTempo;

function embaralhar(arr) {
  return arr.sort(() => 0.5 - Math.random());
}

function definirCartas() {
  const nivel = document.getElementById("nivel").value;
  let quantidade;

  if (nivel === "facil") quantidade = 6;
  else if (nivel === "medio") quantidade = 8;
  else quantidade = 10;

  return [...emojisBase.slice(0, quantidade), ...emojisBase.slice(0, quantidade)];
}

function criarCartas() {
  const tabuleiro = document.getElementById("tabuleiro");
  tabuleiro.innerHTML = "";
  cartas = embaralhar(definirCartas());
  cartas.forEach((emoji) => {
    const carta = document.createElement("div");
    carta.className = "carta";
    carta.dataset.valor = emoji;
    carta.addEventListener("click", () => virarCarta(carta));
    tabuleiro.appendChild(carta);
  });
  inicioTempo = Date.now();
  atualizarTempo();
}

function virarCarta(carta) {
  if (reveladas.length < 2 && !carta.classList.contains("revelada")) {
    carta.classList.add("revelada");
    carta.textContent = carta.dataset.valor;
    reveladas.push(carta);
    if (reveladas.length === 2) verificarPares();
  }
}

function verificarPares() {
  const [c1, c2] = reveladas;
  if (c1.dataset.valor === c2.dataset.valor) {
    paresFeitos++;
    reveladas = [];
    if (paresFeitos === cartas.length / 2) {
      clearInterval(intervaloTempo);
      const tempo = (Date.now() - inicioTempo) / 1000;
      const nivel = document.getElementById("nivel").value;
      const desconto = calcularDesconto(nivel, tempo);

      setTimeout(() => {
        alert(üéâ Parab√©ns! Voc√™ completou em ${tempo.toFixed(1)}s e ganhou um cupom de ${desconto}%! C√≥digo: MEMORIA${desconto});
        window.location.href = "index.html";
      }, 600);
    }
  } else {
    setTimeout(() => {
      reveladas.forEach(c => {
        c.classList.remove("revelada");
        c.textContent = "";
      });
      reveladas = [];
    }, 800);
  }
}

function calcularDesconto(nivel, tempo) {
  let min, max;
  let rapido = false;

  if (nivel === "facil") rapido = tempo <= 60;
  else if (nivel === "medio") rapido = tempo <= 45;
  else if (nivel === "dificil") rapido = tempo <= 30;

  if (nivel === "facil") {
    if (rapido) { min = 15; max = 20; } else { min = 5; max = 10; }
  } else if (nivel === "medio") {
    if (rapido) { min = 25; max = 35; } else { min = 15; max = 25; }
  } else if (nivel === "dificil") {
    if (rapido) { min = 40; max = 50; } else { min = 25; max = 35; }
  }

  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function reiniciar() {
  clearInterval(intervaloTempo);
  paresFeitos = 0;
  reveladas = [];
  criarCartas();
}

function atualizarTempo() {
  const tempoDiv = document.getElementById("tempo");
  intervaloTempo = setInterval(() => {
    const tempo = ((Date.now() - inicioTempo) / 1000).toFixed(1);
    tempoDiv.textContent = ‚è±Ô∏è Tempo: ${tempo}s;
  }, 100);
}

function iniciarJogo() {
  document.getElementById("telaInicio").style.display = "none";
  document.getElementById("telaJogo").style.display = "flex";
  criarCartas();

  // m√∫sica relaxante
  const musica = document.getElementById("musicaFundo");
  musica.volume = 0.3;
  musica.play().catch(err => console.log("Reprodu√ß√£o bloqueada:", err));
}
</script>
</body>
</html>
